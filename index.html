<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>Booker.ai - AI Booking Widget for Local Services</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- AOS (fade in) -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

  <!-- Feather Icons -->
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

  <style>
    html { scroll-behavior: smooth; }
    [id] { scroll-margin-top: 80px; }

    /* Wave gradient animation (your requested style) */
    .gradient-bg {
      background: linear-gradient(135deg,
        #1e3a8a 0%,
        #1d4ed8 20%,
        #3b82f6 40%,
        #60a5fa 60%,
        #93c5fd 80%,
        #dbeafe 100%);
      background-size: 200% 200%;
      animation: waveBackground 8s ease infinite;
    }
    @keyframes waveBackground {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Widget UI */
    .widget-bubble {
      position: fixed; bottom: 2rem; right: 2rem;
      width: 60px; height: 60px; border-radius: 50%;
      background: #4F46E5; color: white;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; box-shadow: 0 10px 25px -5px rgba(79,70,229,0.4);
      z-index: 1000; transition: transform .25s ease;
    }
    .widget-bubble:hover { transform: scale(1.08); }

    .widget-panel {
      position: fixed; bottom: calc(2rem + 80px); right: 2rem;
      width: 400px; max-width: 90vw; height: 520px;
      background: #fff; border-radius: 16px;
      box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
      overflow: hidden; display: none; flex-direction: column;
      z-index: 1000;
    }
    @media (max-width: 640px) {
      .widget-bubble { bottom: 1rem; right: 1rem; }
      .widget-panel  { bottom: calc(1rem + 80px); right: 1rem; width: 92vw; }
    }

    /* Chips */
    .chip {
      display:inline-block; margin:.25rem .3rem 0 0;
      padding:.45rem .75rem; border-radius:9999px;
      border:1px solid #e5e7eb; background:#fff;
      font-size:.9rem; cursor:pointer;
      transition: background .15s ease, transform .05s ease;
    }
    .chip:hover { background:#f9fafb; }
    .chip:active { transform: scale(.98); }
  </style>
</head>
<body class="font-sans antialiased text-gray-900">
  <!-- NAV -->
  <nav class="bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <i data-feather="calendar" class="h-7 w-7 text-indigo-600"></i>
          <span class="ml-2 text-xl font-bold text-indigo-600">BookerPilot</span>
        </div>
        <div class="hidden sm:flex sm:items-center space-x-8">
          <a href="#features" class="text-gray-500 hover:text-gray-900 px-3 py-2 text-sm font-medium">Features</a>
          <a href="#pricing"  class="text-gray-500 hover:text-gray-900 px-3 py-2 text-sm font-medium">Pricing</a>
          <a href="#faq"       class="text-gray-500 hover:text-gray-900 px-3 py-2 text-sm font-medium">FAQ</a>
          <a href="#contact"   class="text-gray-500 hover:text-gray-900 px-3 py-2 text-sm font-medium">Contact</a>
          <a href="#demo"      class="text-indigo-600 hover:text-indigo-800">Live Demo</a>
          <a href="#pricing"   class="bg-indigo-600 text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-indigo-700">Get Started</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="gradient-bg text-white">
    <div class="max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl font-extrabold tracking-tight sm:text-5xl lg:text-6xl" data-aos="fade-up">
        Turn your website into a 24/7 salesperson
      </h1>
      <p class="mt-6 max-w-3xl mx-auto text-xl text-indigo-100" data-aos="fade-up" data-aos-delay="100">
        Add one line of code. Get more bookings, reduce no-shows, and grow your local service business.
      </p>
      <div class="mt-10 flex justify-center gap-4" data-aos="fade-up" data-aos-delay="150">
        <a href="https://buy.stripe.com/fZu8wO3Gd3NVc8s8EX43S03" target="_blank" rel="noopener"
           class="bg-white text-indigo-600 px-8 py-3 rounded-md font-medium hover:bg-gray-50">
          Start free trial ‚Äî Starter
        </a>
        <a href="https://buy.stripe.com/6oU3cu4Khacj6O81cv43S04" target="_blank" rel="noopener"
           class="bg-indigo-600 text-white px-8 py-3 rounded-md font-medium hover:bg-indigo-700">
          Start free trial ‚Äî Pro
        </a>
      </div>
    </div>
  </header>

  <!-- LOGO CLOUD -->
  <section class="bg-gray-50 py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <p class="text-center text-sm font-semibold uppercase text-gray-500 tracking-wide">
        Trusted by local businesses worldwide
      </p>
      <div class="mt-6 text-center text-gray-500">
        Cleaning services ‚Ä¢ Salons ‚Ä¢ Tutors ‚Ä¢ Handymen ‚Ä¢ Personal trainers ‚Ä¢ Pet groomers
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section id="features" class="py-12 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="lg:text-center">
        <h2 class="text-base text-indigo-600 font-semibold tracking-wide uppercase" data-aos="fade-up">Features</h2>
        <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl" data-aos="fade-up">
          Everything you need to grow your business
        </p>
      </div>

      <div class="mt-10 grid md:grid-cols-2 gap-8">
        <div class="flex" data-aos="fade-up">
          <div class="flex-shrink-0">
            <div class="flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white">
              <i data-feather="message-square"></i>
            </div>
          </div>
          <div class="ml-4">
            <h3 class="text-lg leading-6 font-medium text-gray-900">AI Chat & FAQ</h3>
            <p class="mt-2 text-base text-gray-500">Answer customer questions instantly using your business knowledge.</p>
          </div>
        </div>

        <div class="flex" data-aos="fade-up" data-aos-delay="100">
          <div class="flex-shrink-0">
            <div class="flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white">
              <i data-feather="clock"></i>
            </div>
          </div>
          <div class="ml-4">
            <h3 class="text-lg leading-6 font-medium text-gray-900">Real-time Availability</h3>
            <p class="mt-2 text-base text-gray-500">Offer suggested times and hold spots instantly.</p>
          </div>
        </div>

        <div class="flex" data-aos="fade-up" data-aos-delay="200">
          <div class="flex-shrink-0">
            <div class="flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white">
              <i data-feather="credit-card"></i>
            </div>
          </div>
          <div class="ml-4">
            <h3 class="text-lg leading-6 font-medium text-gray-900">Secure Payments</h3>
            <p class="mt-2 text-base text-gray-500">Collect deposits via Stripe to reduce no-shows.</p>
          </div>
        </div>

        <div class="flex" data-aos="fade-up" data-aos-delay="300">
          <div class="flex-shrink-0">
            <div class="flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white">
              <i data-feather="smartphone"></i>
            </div>
          </div>
          <div class="ml-4">
            <h3 class="text-lg leading-6 font-medium text-gray-900">Text & Email Reminders</h3>
            <p class="mt-2 text-base text-gray-500">Automatic confirmations and reminders for every booking.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- DEMO -->
  <section id="demo" class="py-16 bg-gray-50 overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="lg:text-center mb-12">
        <h2 class="text-base text-indigo-600 font-semibold tracking-wide uppercase" data-aos="fade-up">Live Demo</h2>
        <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl" data-aos="fade-up">
          Try it yourself
        </p>
      </div>

      <div class="lg:grid lg:grid-cols-2 lg:gap-8 lg:items-center">
        <div class="relative mb-8 lg:mb-0" data-aos="fade-right">
          <h3 class="text-2xl font-extrabold text-gray-900 tracking-tight sm:text-3xl">One-line installation</h3>
          <p class="mt-3 text-lg text-gray-500">Add these two lines to your website and you're done. No coding required.</p>
          <div class="mt-6 bg-gray-800 rounded-lg p-4 overflow-x-auto">
            <pre class="text-gray-200 text-sm"><code>&lt;script src="https://cdn.booker.ai/widget.js" async&gt;&lt;/script&gt;
&lt;script&gt;
  window.BookerPilot = window.BookerPilot || function(){ (BookerPilot.q = BookerPilot.q || []).push(arguments); };
  BookerPilot("init", { business: "your-business-slug" });
&lt;/script&gt;</code></pre>
          </div>

          <div class="mt-8 flex">
            <div class="flex-shrink-0">
              <div class="flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white">
                <i data-feather="zap"></i>
              </div>
            </div>
            <div class="ml-4">
              <h4 class="text-lg leading-6 font-medium text-gray-900">Works everywhere</h4>
              <p class="mt-2 text-base text-gray-500">Squarespace, Wix, WordPress, Shopify, or custom HTML sites.</p>
            </div>
          </div>
        </div>

        <div class="relative" data-aos="fade-left">
          <div class="border border-gray-200 rounded-lg p-6 bg-white shadow-sm">
            <h3 class="text-xl font-bold text-gray-900 mb-4">Demo: Yoga Studio Booking</h3>
            <p class="text-gray-600 mb-4">Ask the assistant to book a class:</p>
            <ul class="space-y-2 text-gray-700 text-sm">
              <li class="flex items-start"><i data-feather="chevron-right" class="h-4 w-4 text-indigo-500 mt-0.5"></i><span class="ml-2">‚ÄúBook a beginner class tomorrow.‚Äù</span></li>
              <li class="flex items-start"><i data-feather="chevron-right" class="h-4 w-4 text-indigo-500 mt-0.5"></i><span class="ml-2">‚ÄúDo you have Puppy Yoga this week?‚Äù</span></li>
              <li class="flex items-start"><i data-feather="chevron-right" class="h-4 w-4 text-indigo-500 mt-0.5"></i><span class="ml-2">‚ÄúWhat times are available?‚Äù</span></li>
            </ul>
            <button id="open-demo-widget" class="mt-6 w-full bg-indigo-600 border border-transparent rounded-md py-3 px-4 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
              Open Demo Widget
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- PRICING -->
  <section id="pricing" class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="lg:text-center mb-12">
        <h2 class="text-base text-indigo-600 font-semibold tracking-wide uppercase" data-aos="fade-up">Pricing</h2>
        <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl" data-aos="fade-up">
          Simple plans that grow with you
        </p>
      </div>

      <div class="mt-12 grid sm:grid-cols-2 gap-6 lg:max-w-4xl lg:mx-auto">
        <!-- Starter -->
        <div class="border border-gray-200 rounded-lg shadow-sm divide-y divide-gray-200" data-aos="fade-up">
          <div class="p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900">Starter</h3>
            <p class="mt-4"><span class="text-4xl font-extrabold text-gray-900">$49</span><span class="text-base font-medium text-gray-500">/mo</span></p>
            <p class="mt-4 text-sm text-gray-500">Perfect for solo entrepreneurs and small teams</p>
            <a href="https://buy.stripe.com/fZu8wO3Gd3NVc8s8EX43S03" target="_blank" rel="noopener"
               class="mt-8 block w-full bg-gray-800 border border-gray-800 rounded-md py-2 text-sm font-semibold text-white text-center hover:bg-gray-900">Start free trial</a>
          </div>
          <div class="pt-6 pb-8 px-6">
            <h4 class="text-xs font-medium text-gray-900 tracking-wide uppercase">What's included</h4>
            <ul class="mt-6 space-y-4 text-sm text-gray-600">
              <li class="flex items-start"><i data-feather="check" class="h-5 w-5 text-green-500 mr-2"></i>50 conversations/month</li>
              <li class="flex items-start"><i data-feather="check" class="h-5 w-5 text-green-500 mr-2"></i>15 bookings/month</li>
              <li class="flex items-start"><i data-feather="check" class="h-5 w-5 text-green-500 mr-2"></i>Email confirmations</li>
              <li class="flex items-start"><i data-feather="check" class="h-5 w-5 text-green-500 mr-2"></i>Basic analytics</li>
            </ul>
          </div>
        </div>

        <!-- Pro -->
        <div class="border border-indigo-500 rounded-lg shadow-sm divide-y divide-indigo-500" data-aos="fade-up" data-aos-delay="100">
          <div class="p-6">
            <div class="flex justify-between items-start">
              <div>
                <h3 class="text-lg leading-6 font-medium text-gray-900">Pro</h3>
                <p class="mt-2 text-sm text-indigo-700">Most popular</p>
              </div>
            </div>
            <p class="mt-4"><span class="text-4xl font-extrabold text-gray-900">$99</span><span class="text-base font-medium text-gray-500">/mo</span></p>
            <p class="mt-4 text-sm text-gray-500">For growing businesses that need more</p>
            <a href="https://buy.stripe.com/6oU3cu4Khacj6O81cv43S04" target="_blank" rel="noopener"
               class="mt-8 block w-full bg-indigo-600 border border-indigo-600 rounded-md py-2 text-sm font-semibold text-white text-center hover:bg-indigo-700">Start free trial</a>
          </div>
          <div class="pt-6 pb-8 px-6">
            <h4 class="text-xs font-medium text-gray-900 tracking-wide uppercase">What's included</h4>
            <ul class="mt-6 space-y-4 text-sm text-gray-600">
              <li class="flex items-start"><i data-feather="check" class="h-5 w-5 text-green-500 mr-2"></i>Unlimited conversations</li>
              <li class="flex items-start"><i data-feather="check" class="h-5 w-5 text-green-500 mr-2"></i>100 bookings/month</li>
              <li class="flex items-start"><i data-feather="check" class="h-5 w-5 text-green-500 mr-2"></i>Email & SMS reminders</li>
              <li class="flex items-start"><i data-feather="check" class="h-5 w-5 text-green-500 mr-2"></i>Advanced analytics</li>
              <li class="flex items-start"><i data-feather="check" class="h-5 w-5 text-green-500 mr-2"></i>Membership upsells</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="lg:text-center mb-12">
        <h2 class="text-base text-indigo-600 font-semibold tracking-wide uppercase" data-aos="fade-up">FAQ</h2>
        <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl" data-aos="fade-up">Frequently asked questions</p>
      </div>

      <dl class="grid md:grid-cols-2 gap-6">
        <div class="bg-white p-6 rounded-lg shadow-sm" data-aos="fade-up">
          <dt class="text-lg leading-6 font-medium text-gray-900">What types of businesses is this for?</dt>
          <dd class="mt-2 text-base text-gray-600">Any local service business that takes appointments: yoga, salons, car dealerships, handymen, trainers, and more.</dd>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-sm" data-aos="fade-up" data-aos-delay="100">
          <dt class="text-lg leading-6 font-medium text-gray-900">How does the AI work?</dt>
          <dd class="mt-2 text-base text-gray-600">After integration, the AI answers from your guidelines, books in your calendar, sends reminders, and can accept payments via your website.</dd>
        </div>
      </dl>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
      <div class="lg:text-center mb-10">
        <h2 class="text-base text-indigo-600 font-semibold tracking-wide uppercase">Contact Us</h2>
        <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl">Questions? We‚Äôre here to help.</p>
        <p class="mt-4 max-w-2xl text-xl text-gray-500 mx-auto">Fill out the form below and we‚Äôll reply to you shortly.</p>
      </div>

      <form action="https://formsubmit.co/bookerpilot@outlook.com" method="POST" class="max-w-2xl mx-auto space-y-4">
        <input type="hidden" name="_next" value="https://bookerpilot.com/index.html#contact">
        <input type="hidden" name="_subject" value="New Contact from BookerPilot Website">
        <input type="hidden" name="_captcha" value="false">
        <input type="text"   name="name"    placeholder="Your Name"               class="w-full border rounded-lg px-3 py-2" required>
        <input type="email"  name="email"   placeholder="Your Email"              class="w-full border rounded-lg px-3 py-2" required>
        <textarea            name="message" placeholder="Your Question or Message" class="w-full border rounded-lg px-3 py-2 h-32" required></textarea>
        <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 shadow">Send Message</button>
      </form>
    </div>
  </section>

  <!-- CTA -->
  <section class="gradient-bg">
    <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between">
      <h2 class="text-3xl font-extrabold tracking-tight text-white sm:text-4xl" data-aos="fade-right">
        <span class="block">Ready to get started?</span>
        <span class="block text-indigo-200">Start your free trial today.</span>
      </h2>
      <div class="mt-8 flex lg:mt-0 lg:flex-shrink-0" data-aos="fade-left">
        <a href="https://buy.stripe.com/fZu8wO3Gd3NVc8s8EX43S03" target="_blank" rel="noopener"
           class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50">Get started ‚Äî Starter</a>
        <a href="https://buy.stripe.com/6oU3cu4Khacj6O81cv43S04" target="_blank" rel="noopener"
           class="ml-3 inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-500 bg-opacity-60 hover:bg-opacity-70">Get started ‚Äî Pro</a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-white">
    <div class="max-w-7xl mx-auto py-12 px-4 overflow-hidden sm:px-6 lg:px-8">
      <nav class="-mx-5 -my-2 flex flex-wrap justify-center" aria-label="Footer">
        <a href="#"         class="px-5 py-2 text-base text-gray-500 hover:text-gray-900">Home</a>
        <a href="#features" class="px-5 py-2 text-base text-gray-500 hover:text-gray-900">Features</a>
        <a href="#pricing"  class="px-5 py-2 text-base text-gray-500 hover:text-gray-900">Pricing</a>
        <a href="#faq"      class="px-5 py-2 text-base text-gray-500 hover:text-gray-900">FAQ</a>
        <a href="#contact"  class="px-5 py-2 text-base text-gray-500 hover:text-gray-900">Contact</a>
        <a href="#"         class="px-5 py-2 text-base text-gray-500 hover:text-gray-900">Privacy</a>
        <a href="#"         class="px-5 py-2 text-base text-gray-500 hover:text-gray-900">Terms</a>
      </nav>
      <div class="mt-8 flex justify-center space-x-6">
        <a href="#" class="text-gray-400 hover:text-gray-500" aria-label="Facebook"><i data-feather="facebook"></i></a>
        <a href="#" class="text-gray-400 hover:text-gray-500" aria-label="Instagram"><i data-feather="instagram"></i></a>
        <a href="#" class="text-gray-400 hover:text-gray-500" aria-label="Twitter"><i data-feather="twitter"></i></a>
      </div>
      <p class="mt-8 text-center text-base text-gray-400">&copy; 2025 BookerPilot. All rights reserved.</p>
    </div>
  </footer>

  <!-- WIDGET BUBBLE -->
  <div id="widget-bubble" class="widget-bubble" title="Chat with BookerPilot">
    <i data-feather="message-square"></i>
  </div>

  <!-- WIDGET PANEL -->
  <div id="widget-panel" class="widget-panel">
    <div class="bg-indigo-600 text-white p-4">
      <div class="flex justify-between items-center">
        <h3 id="widget-title" class="font-medium">Sunrise Yoga Studio</h3>
        <button id="close-widget" class="text-white hover:text-indigo-200">
          <i data-feather="x"></i>
        </button>
      </div>
    </div>

    <div class="flex-1 p-4 overflow-y-auto">
      <div id="chat-thread" class="space-y-3"></div>
    </div>

    <div class="border-t border-gray-200 p-3">
      <div class="flex items-center">
        <input id="chat-input" type="text" placeholder="Type your message‚Ä¶" class="flex-1 border border-gray-300 rounded-l-md py-2 px-3 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" autocomplete="off">
        <button id="send-btn" class="bg-indigo-600 text-white px-4 py-2 rounded-r-md hover:bg-indigo-700">
          <i data-feather="send"></i>
        </button>
      </div>
    </div>
  </div>

  <script>
    // ===== Init libs
    AOS.init({ duration: 700, once: true });
    feather.replace();

    // ===== DOM
    const bubble = document.getElementById('widget-bubble');
    const panel  = document.getElementById('widget-panel');
    const closeB = document.getElementById('close-widget');
    const input  = document.getElementById('chat-input');
    const send   = document.getElementById('send-btn');
    const thread = document.getElementById('chat-thread');

    function scrollToBottom(){
      const sc = panel.querySelector('.overflow-y-auto');
      if (sc) sc.scrollTop = sc.scrollHeight;
    }

    function addBubble(text, who='bot'){
      const wrap = document.createElement('div');
      wrap.className = `flex ${who === 'user' ? 'justify-end' : 'justify-start'}`;
      const b = document.createElement('div');
      b.className = `max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${
        who === 'user' ? 'rounded-tr-none bg-indigo-600 text-white' : 'rounded-tl-none bg-gray-100 text-gray-800'
      }`;
      b.textContent = text;
      wrap.appendChild(b);
      thread.appendChild(wrap);
      scrollToBottom();
    }

    function addBubbleHTML(html, who='bot'){
      const wrap = document.createElement('div');
      wrap.className = `flex ${who === 'user' ? 'justify-end' : 'justify-start'}`;
      const b = document.createElement('div');
      b.className = `max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${
        who === 'user' ? 'rounded-tr-none bg-indigo-600 text-white' : 'rounded-tl-none bg-gray-100 text-gray-800'
      }`;
      b.innerHTML = html;
      wrap.appendChild(b);
      thread.appendChild(wrap);
      scrollToBottom();
    }

    function sanitize(s){ return String(s||'').replace(/[\u0000-\u001F<>]/g,'').trim(); }

    function toggleWidget(){
      const show = panel.style.display !== 'flex';
      panel.style.display = show ? 'flex' : 'none';
      bubble.style.display = show ? 'none' : 'flex';
      if (show) setTimeout(()=>input?.focus(), 80);
    }

    bubble.addEventListener('click', toggleWidget);
    closeB.addEventListener('click', toggleWidget);
    document.getElementById('open-demo-widget')?.addEventListener('click', toggleWidget);

    // ===== Guided Yoga Flow =====
    // Steps: 1 intro -> 2 name -> 3 choose class -> 4 choose time (varies by class) -> 5 email -> 6 phone -> 7 confirm
    const state = { step: 0, name: '', classType: '', time: '', email: '', phone: '' };

    // Different availability per class
    const CLASS_OPTIONS = {
      "Puppy Yoga": [
        "Tue 6:30 PM",
        "Thu 5:00 PM",
        "Sat 10:00 AM"
      ],
      "Beginner Flow": [
        "Mon 7:00 AM",
        "Wed 12:00 PM",
        "Fri 6:00 PM"
      ],
      "Power Vinyasa": [
        "Tue 7:00 AM",
        "Thu 6:00 PM",
        "Sun 9:00 AM"
      ],
      "Restorative": [
        "Mon 8:00 PM",
        "Wed 8:00 PM",
        "Sat 4:00 PM"
      ]
    };

    const STUDIO_ADDRESS = "Sunrise Yoga Studio ‚Äî 123 Harmony Ave, Suite 201, Brooklyn, NY 11211";

    function startYogaDemo(){
      state.step = 1;
      addBubble("üëã Hi! I‚Äôm your AI assistant for Sunrise Yoga Studio.");
      addBubble("I can help you book a class in seconds. First, what‚Äôs your name?");
    }

    function classChips(){
      const keys = Object.keys(CLASS_OPTIONS);
      return `
        <div class="mt-1">
          ${keys.map(k => `<button class="chip chip-class" data-class="${k}">${k}</button>`).join(' ')}
        </div>
      `;
    }

    function timeChips(type){
      const times = CLASS_OPTIONS[type] || [];
      return `
        <div class="mt-1">
          ${times.map(t => `<button class="chip chip-time" data-time="${t}">${t}</button>`).join(' ')}
        </div>
      `;
    }

    function bindClassChips(){
      document.querySelectorAll('.chip-class').forEach(btn=>{
        btn.onclick = () => {
          input.value = btn.getAttribute('data-class');
          sendNow();
        };
      });
    }

    function bindTimeChips(){
      document.querySelectorAll('.chip-time').forEach(btn=>{
        btn.onclick = () => {
          input.value = btn.getAttribute('data-time');
          sendNow();
        };
      });
    }

    function validEmail(e){
      const s = String(e||'').trim();
      const at = s.indexOf('@');
      const dot = s.lastIndexOf('.');
      return at > 0 && dot > at + 1 && dot < s.length - 1;
    }

    function normalizeDigits(str){
      return (str || '').replace(/\D+/g,'');
    }

    function validPhone(p){
      const digits = normalizeDigits(p);
      // Accept 10-15 digits to cover national & simple international formats
      return digits.length >= 10 && digits.length <= 15;
    }

    function formatPhone(p){
      const d = normalizeDigits(p);
      if (d.length === 10) {
        return `(${d.slice(0,3)}) ${d.slice(3,6)}-${d.slice(6)}`;
      }
      return p;
    }

    async function sendNow(){
      const q = sanitize(input.value);
      if (!q) return;

      addBubble(q, 'user');
      input.value = '';

      // Step 1: ask name
      if (state.step === 1){
        state.name = q;
        state.step = 2;
        addBubble(`Great to meet you, ${state.name}! What type of class are you looking for today?`);
        addBubbleHTML(classChips());
        bindClassChips();
        return;
      }

      // Step 2: choose class
      if (state.step === 2){
        const chosen = q in CLASS_OPTIONS ? q : Object.keys(CLASS_OPTIONS).find(k => k.toLowerCase() === q.toLowerCase());
        if (!chosen){
          addBubble("I didn‚Äôt catch that class type. Here are some options you can tap:");
          addBubbleHTML(classChips());
          bindClassChips();
          return;
        }
        state.classType = chosen;
        state.step = 3;
        addBubble(`Excellent choice ‚Äî **${state.classType}**. Here are current openings:`);
        addBubbleHTML(timeChips(state.classType));
        bindTimeChips();
        return;
      }

      // Step 3: choose time
      if (state.step === 3){
        const times = CLASS_OPTIONS[state.classType] || [];
        if (!times.includes(q)){
          addBubble("That time isn‚Äôt available for this class. Please choose one of the options:");
          addBubbleHTML(timeChips(state.classType));
          bindTimeChips();
          return;
        }
        state.time = q;
        state.step = 4;
        addBubble(`Almost done! What‚Äôs the best email for your confirmation?`);
        return;
      }

      // Step 4: email
      if (state.step === 4){
        if (!validEmail(q)){
          addBubble(`Hmm, that doesn‚Äôt look like a valid email. Please include an "@" and a "." (e.g., name@example.com).`);
          return;
        }
        state.email = q;
        state.step = 5;
        addBubble(`Thanks! What phone number should we use for a quick reminder text?`);
        return;
      }

      // Step 5: phone
      if (state.step === 5){
        if (!validPhone(q)){
          addBubble(`That phone number seems off. Please enter a standard number (10‚Äì15 digits). You can include spaces, dashes, or parentheses.`);
          return;
        }
        state.phone = formatPhone(q);
        state.step = 6;

        // Confirmation
        addBubble(`‚úÖ You‚Äôre booked, ${state.name}!`);
        addBubbleHTML(`
          <div>
            <div><strong>Class:</strong> ${state.classType}</div>
            <div><strong>Time:</strong> ${state.time}</div>
            <div><strong>Location:</strong> ${STUDIO_ADDRESS}</div>
            <div><strong>Confirmation sent to:</strong> ${state.email}</div>
            <div><strong>Reminder to:</strong> ${state.phone}</div>
          </div>
        `);
        addBubble(`We‚Äôll reach out if anything changes. You‚Äôll also receive calendar invites and reminders so nothing slips through the cracks.`);
        addBubble(`By the way ‚Äî once AI is enabled for your business, we‚Äôll answer FAQs from your guidelines, place bookings directly on your calendar (and the customer‚Äôs), send reminders automatically, and accept payments on your website.`);
        state.step = 0; // reset for another run
        return;
      }

      // If not started / finished, (re)start
      if (state.step === 0){
        startYogaDemo();
      }
    }

    // Wire input
    send.addEventListener('click', sendNow);
    input.addEventListener('keydown', e => { if (e.key === 'Enter') { e.preventDefault(); sendNow(); }});

    // Boot the demo when widget first opens
    let booted = false;
    function onOpen(){
      if (!booted){
        booted = true;
        setTimeout(startYogaDemo, 200);
      }
    }
    bubble.addEventListener('click', onOpen, { once: true });
  </script>
</body>
</html>
